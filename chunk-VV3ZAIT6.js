import{a as P,b as c,c as R,d as T,g as k,h as M,i as N,m as L,o as D}from"./chunk-SFHHH3KZ.js";import{b as y}from"./chunk-HWYJJFZ5.js";import{r as E,s as F}from"./chunk-XDCWJPAS.js";import{$a as m,Ab as o,Bb as S,Ha as C,Ma as w,ab as d,fb as b,gb as i,ha as _,hb as n,ib as s,rb as v,tb as g,za as l,zb as h}from"./chunk-C264W5OG.js";function A(t,a){if(t&1&&(i(0,"div",7),s(1,"i",38),i(2,"span"),o(3),n()()),t&2){let e=g();l(3),S(e.errorMessage())}}function I(t,a){t&1&&o(0," El nombre es requerido ")}function G(t,a){t&1&&o(0," M\xEDnimo 2 caracteres ")}function V(t,a){if(t&1&&(i(0,"p",16),m(1,I,1,0)(2,G,1,0),n()),t&2){let e,r=g();l(),d(!((e=r.registerForm.get("name"))==null||e.errors==null)&&e.errors.required?1:!((e=r.registerForm.get("name"))==null||e.errors==null)&&e.errors.minlength?2:-1)}}function j(t,a){t&1&&o(0," El correo es requerido ")}function B(t,a){t&1&&o(0," Ingresa un correo v\xE1lido ")}function z(t,a){if(t&1&&(i(0,"p",16),m(1,j,1,0)(2,B,1,0),n()),t&2){let e,r=g();l(),d(!((e=r.registerForm.get("email"))==null||e.errors==null)&&e.errors.required?1:!((e=r.registerForm.get("email"))==null||e.errors==null)&&e.errors.email?2:-1)}}function Y(t,a){t&1&&o(0," La contrase\xF1a es requerida ")}function H(t,a){t&1&&o(0," M\xEDnimo 6 caracteres ")}function J(t,a){if(t&1&&(i(0,"p",16),m(1,Y,1,0)(2,H,1,0),n()),t&2){let e,r=g();l(),d(!((e=r.registerForm.get("password"))==null||e.errors==null)&&e.errors.required?1:!((e=r.registerForm.get("password"))==null||e.errors==null)&&e.errors.minlength?2:-1)}}function K(t,a){t&1&&o(0," Confirma tu contrase\xF1a ")}function O(t,a){t&1&&o(0," Las contrase\xF1as no coinciden ")}function Q(t,a){if(t&1&&(i(0,"p",16),m(1,K,1,0)(2,O,1,0),n()),t&2){let e,r=g();l(),d(!((e=r.registerForm.get("confirmPassword"))==null||e.errors==null)&&e.errors.required?1:!((e=r.registerForm.get("confirmPassword"))==null||e.errors==null)&&e.errors.mismatch?2:-1)}}function U(t,a){t&1&&(s(0,"i",39),i(1,"span"),o(2,"Creando cuenta..."),n())}function W(t,a){t&1&&(s(0,"i",40),i(1,"span"),o(2,"Crear Cuenta"),n())}var q=class t{constructor(a,e,r){this.fb=a;this.authService=e;this.router=r;this.registerForm=this.fb.group({name:["",[c.required,c.minLength(2)]],lastname:[""],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",[c.required]]},{validators:this.passwordMatchValidator})}registerForm;errorMessage=_("");showPassword=_(!1);showConfirmPassword=_(!1);get isLoading(){return this.authService.isLoading()}passwordMatchValidator(a){let e=a.get("password")?.value,r=a.get("confirmPassword")?.value;return e!==r?(a.get("confirmPassword")?.setErrors({mismatch:!0}),{mismatch:!0}):null}togglePassword(){this.showPassword.update(a=>!a)}toggleConfirmPassword(){this.showConfirmPassword.update(a=>!a)}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.errorMessage.set("");let{name:a,lastname:e,email:r,password:u}=this.registerForm.value;this.authService.register({name:a,lastname:e,email:r,password:u}).subscribe({next:()=>{this.router.navigate(["/"])},error:p=>{let f=p.error?.message||"Error al registrarse. Int\xE9ntalo de nuevo.";this.errorMessage.set(f)}})}static \u0275fac=function(e){return new(e||t)(C(L),C(y),C(E))};static \u0275cmp=w({type:t,selectors:[["app-register"]],decls:82,vars:14,consts:[[1,"min-h-screen","py-12","px-4"],[1,"max-w-md","mx-auto"],[1,"text-center","mb-8"],["routerLink","/",1,"inline-block"],[1,"title-font","text-4xl","text-amber-100","hover:text-amber-200","transition-colors"],[1,"mt-2","text-amber-200/70"],[1,"container-custom","rounded-xl","p-8"],[1,"mb-6","p-4","bg-red-900/50","border","border-red-500/50","rounded-lg","text-red-200","text-sm","flex","items-center","gap-3"],[3,"ngSubmit","formGroup"],[1,"mb-5"],["for","name",1,"block","text-amber-100","text-sm","font-medium","mb-2"],[1,"text-red-400"],[1,"relative"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-amber-400/60"],[1,"fas","fa-user"],["type","text","id","name","formControlName","name","placeholder","Tu nombre",1,"w-full","pl-10","pr-4","py-3","bg-stone-800/50","border","border-amber-900/30","rounded-lg","text-amber-100","placeholder-amber-100/40","focus:outline-none","focus:border-amber-500/50","focus:ring-1","focus:ring-amber-500/30","transition-colors"],[1,"mt-2","text-red-400","text-sm"],["for","lastname",1,"block","text-amber-100","text-sm","font-medium","mb-2"],["type","text","id","lastname","formControlName","lastname","placeholder","Tu apellido (opcional)",1,"w-full","pl-10","pr-4","py-3","bg-stone-800/50","border","border-amber-900/30","rounded-lg","text-amber-100","placeholder-amber-100/40","focus:outline-none","focus:border-amber-500/50","focus:ring-1","focus:ring-amber-500/30","transition-colors"],["for","email",1,"block","text-amber-100","text-sm","font-medium","mb-2"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email","autocomplete","off","placeholder","tu@email.com",1,"w-full","pl-10","pr-4","py-3","bg-stone-800/50","border","border-amber-900/30","rounded-lg","text-amber-100","placeholder-amber-100/40","focus:outline-none","focus:border-amber-500/50","focus:ring-1","focus:ring-amber-500/30","transition-colors"],["for","password",1,"block","text-amber-100","text-sm","font-medium","mb-2"],[1,"fas","fa-lock"],["id","password","formControlName","password","autocomplete","new-password","placeholder","M\xEDnimo 6 caracteres",1,"w-full","pl-10","pr-12","py-3","bg-stone-800/50","border","border-amber-900/30","rounded-lg","text-amber-100","placeholder-amber-100/40","focus:outline-none","focus:border-amber-500/50","focus:ring-1","focus:ring-amber-500/30","transition-colors",3,"type"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-amber-400/60","hover:text-amber-400","transition-colors",3,"click"],[1,"mb-6"],["for","confirmPassword",1,"block","text-amber-100","text-sm","font-medium","mb-2"],["id","confirmPassword","formControlName","confirmPassword","autocomplete","new-password","placeholder","Repite tu contrase\xF1a",1,"w-full","pl-10","pr-12","py-3","bg-stone-800/50","border","border-amber-900/30","rounded-lg","text-amber-100","placeholder-amber-100/40","focus:outline-none","focus:border-amber-500/50","focus:ring-1","focus:ring-amber-500/30","transition-colors",3,"type"],[1,"mb-6","text-amber-200/60","text-xs"],["routerLink","/terms",1,"text-amber-400","hover:underline"],["routerLink","/privacy",1,"text-amber-400","hover:underline"],["type","submit",1,"w-full","py-3","px-4","bg-gradient-to-r","from-amber-600","to-amber-700","hover:from-amber-500","hover:to-amber-600","text-white","font-semibold","rounded-lg","transition-all","duration-300","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],[1,"mt-6","text-center"],[1,"text-amber-200/70","text-sm"],["routerLink","/login",1,"text-amber-400","hover:text-amber-300","font-medium","transition-colors"],["routerLink","/",1,"text-amber-200/60","hover:text-amber-200","text-sm","transition-colors","inline-flex","items-center","gap-2"],[1,"fas","fa-arrow-left"],[1,"fas","fa-exclamation-circle","text-red-400"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-user-plus"]],template:function(e,r){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"h1",4),o(5," Epicstoria "),n()(),i(6,"p",5),o(7,"Crea tu cuenta para comenzar"),n()(),i(8,"div",6),m(9,A,4,1,"div",7),i(10,"form",8),v("ngSubmit",function(){return r.onSubmit()}),i(11,"div",9)(12,"label",10),o(13," Nombre "),i(14,"span",11),o(15,"*"),n()(),i(16,"div",12)(17,"span",13),s(18,"i",14),n(),s(19,"input",15),n(),m(20,V,3,1,"p",16),n(),i(21,"div",9)(22,"label",17),o(23," Apellido "),n(),i(24,"div",12)(25,"span",13),s(26,"i",14),n(),s(27,"input",18),n()(),i(28,"div",9)(29,"label",19),o(30," Correo electr\xF3nico "),i(31,"span",11),o(32,"*"),n()(),i(33,"div",12)(34,"span",13),s(35,"i",20),n(),s(36,"input",21),n(),m(37,z,3,1,"p",16),n(),i(38,"div",9)(39,"label",22),o(40," Contrase\xF1a "),i(41,"span",11),o(42,"*"),n()(),i(43,"div",12)(44,"span",13),s(45,"i",23),n(),s(46,"input",24),i(47,"button",25),v("click",function(){return r.togglePassword()}),s(48,"i"),n()(),m(49,J,3,1,"p",16),n(),i(50,"div",26)(51,"label",27),o(52," Confirmar contrase\xF1a "),i(53,"span",11),o(54,"*"),n()(),i(55,"div",12)(56,"span",13),s(57,"i",23),n(),s(58,"input",28),i(59,"button",25),v("click",function(){return r.toggleConfirmPassword()}),s(60,"i"),n()(),m(61,Q,3,1,"p",16),n(),i(62,"p",29),o(63," Al registrarte, aceptas nuestros "),i(64,"a",30),o(65,"T\xE9rminos de Servicio"),n(),o(66," y "),i(67,"a",31),o(68,"Pol\xEDtica de Privacidad"),n(),o(69,". "),n(),i(70,"button",32),m(71,U,3,0)(72,W,3,0),n()(),i(73,"div",33)(74,"p",34),o(75," \xBFYa tienes cuenta? "),i(76,"a",35),o(77," Inicia sesi\xF3n "),n()()()(),i(78,"div",33)(79,"a",36),s(80,"i",37),o(81," Volver al inicio "),n()()()()),e&2){let u,p,f,x;l(9),d(r.errorMessage()?9:-1),l(),b("formGroup",r.registerForm),l(10),d((u=r.registerForm.get("name"))!=null&&u.touched&&((u=r.registerForm.get("name"))!=null&&u.errors)?20:-1),l(17),d((p=r.registerForm.get("email"))!=null&&p.touched&&((p=r.registerForm.get("email"))!=null&&p.errors)?37:-1),l(9),b("type",r.showPassword()?"text":"password"),l(2),h(r.showPassword()?"fas fa-eye-slash":"fas fa-eye"),l(),d((f=r.registerForm.get("password"))!=null&&f.touched&&((f=r.registerForm.get("password"))!=null&&f.errors)?49:-1),l(9),b("type",r.showConfirmPassword()?"text":"password"),l(2),h(r.showConfirmPassword()?"fas fa-eye-slash":"fas fa-eye"),l(),d((x=r.registerForm.get("confirmPassword"))!=null&&x.touched&&((x=r.registerForm.get("confirmPassword"))!=null&&x.errors)?61:-1),l(9),b("disabled",r.isLoading),l(),d(r.isLoading?71:72)}},dependencies:[F,D,k,P,R,T,N,M],encapsulation:2})};export{q as RegisterComponent};
