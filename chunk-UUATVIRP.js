async function s(e){let t=["png","jpg","jpeg","gif","webp"];for(let n of t){let r=`${e}.${n}`;try{return await g(r),r}catch{}}throw new Error(`No valid image format found for: ${e}`)}function g(e){return new Promise((t,n)=>{let r=new Image;r.setAttribute("loading","lazy"),r.onload=()=>t(),r.onerror=()=>n(),r.src=e})}async function a(e,t,n){let r=e.target;if(t===n||r.src===n)return;let o=t.replace(/\.(jpg|jpeg|png|gif|webp)$/i,"");try{let i=await s(o);if(i!==t){r.src=i;return}}catch{}r.src=n}export{a};
