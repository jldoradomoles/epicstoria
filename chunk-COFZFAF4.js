import{a as W,c as O,f as j,j as B,k as q,l as R,n as V}from"./chunk-SFHHH3KZ.js";import{a as L,b as A,d as I}from"./chunk-BJ4EUBTB.js";import{a as P}from"./chunk-D3HCHVYY.js";import"./chunk-HWYJJFZ5.js";import{b as k,s as D}from"./chunk-XDCWJPAS.js";import{$a as E,Ab as o,Bb as h,Cb as f,Eb as u,Fb as p,Gb as g,Jb as F,Kb as N,Lb as T,Ma as S,R as v,ab as w,cb as M,db as x,eb as y,fb as m,gb as t,hb as n,ib as c,rb as C,tb as b,wa as _,za as s}from"./chunk-C264W5OG.js";var H=l=>["/evento",l],J=(l,e)=>e.id;function K(l,e){if(l&1&&(t(0,"option",17),o(1),n()),l&2){let r=e.$implicit;m("value",r),s(),h(r)}}function Q(l,e){l&1&&(t(0,"div",26),c(1,"i",28),t(2,"h3",29),o(3,"No se encontraron eventos"),n(),t(4,"p",30),o(5," Intenta ajustar los filtros de b\xFAsqueda para encontrar m\xE1s resultados "),n()())}function Y(l,e){if(l&1&&(t(0,"a",31)(1,"div",32),c(2,"img",33),t(3,"span",34),o(4),n()(),t(5,"div",35)(6,"p",36),o(7),N(8,"dateFormat"),n(),t(9,"h4",37),o(10),n(),t(11,"p",38),o(12),n(),t(13,"span",39),o(14," Ver M\xE1s \u2192 "),n()()()),l&2){let r=e.$implicit,i=b(2);m("routerLink",F(10,H,r.slug||r.id)),s(2),m("src",r.imageUrl,_)("alt",r.title),s(),m("ngClass",i.getCategoryColor(r.category)),s(),f(" ",r.category," "),s(3),h(T(8,8,r.date)),s(3),h(r.title),s(2),f(" ",i.getPlainText(r.summary)," ")}}function Z(l,e){if(l&1&&(t(0,"div",27),x(1,Y,15,12,"a",31,J),n()),l&2){let r=b();s(),y(r.filteredEvents)}}var z=class l{eventApiService=v(P);events=[];filteredEvents=[];searchName="";searchDate="";searchContent="";selectedCategory="all";categories=[];getCategoryColor=A;getPlainText=I;ngOnInit(){this.eventApiService.getAllEvents().subscribe({next:e=>{this.events=e,this.filteredEvents=[],this.extractCategories()},error:e=>{console.error("Error loading events:",e)}})}extractCategories(){let e=new Set(this.events.map(r=>r.category));this.categories=Array.from(e).sort()}applyFilters(){this.filteredEvents=this.events.filter(e=>{let r=this.searchName.trim()===""||e.title.toLowerCase().includes(this.searchName.toLowerCase()),i=this.searchDate.trim()===""||e.date.includes(this.searchDate),d=Array.isArray(e.summary)?e.summary.join(" "):e.summary,a=Array.isArray(e.context)?e.context.join(" "):e.context,U=Array.isArray(e.consequences)?e.consequences.join(" "):e.consequences,X=this.searchContent.trim()===""||d.toLowerCase().includes(this.searchContent.toLowerCase())||a.toLowerCase().includes(this.searchContent.toLowerCase())||U.toLowerCase().includes(this.searchContent.toLowerCase()),G=this.selectedCategory==="all"||e.category===this.selectedCategory;return r&&i&&X&&G})}clearFilters(){this.searchName="",this.searchDate="",this.searchContent="",this.selectedCategory="all",this.filteredEvents=[]}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=S({type:l,selectors:[["app-search"]],decls:47,vars:6,consts:[[1,"min-h-screen","py-12"],[1,"mx-auto","max-w-7xl","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"text-5xl","text-color","mb-4","text-center"],[1,"text-xl","text-color","text-center"],[1,"container-custom","rounded-xl","p-8","shadow-2xl","mb-8"],[1,"grid","gap-6","md:grid-cols-2","lg:grid-cols-4"],[1,"block","text-sm","font-bold","text-color","mb-2"],[1,"fas","fa-signature","text-blue-500","mr-2"],["type","text","placeholder","Ej: Revoluci\xF3n, Guerra...",1,"w-full","rounded-lg","border","border-gray-300","px-4","py-2","focus:border-blue-500","focus:outline-none","focus:ring-2","focus:ring-blue-500/50",3,"ngModelChange","ngModel"],[1,"fas","fa-calendar","text-green-500","mr-2"],["type","text","placeholder","Ej: 1789, siglo XX...",1,"w-full","rounded-lg","border","border-gray-300","px-4","py-2","focus:border-blue-500","focus:outline-none","focus:ring-2","focus:ring-blue-500/50",3,"ngModelChange","ngModel"],[1,"fas","fa-search","text-purple-500","mr-2"],["type","text","placeholder","Buscar en descripci\xF3n...",1,"w-full","rounded-lg","border","border-gray-300","px-4","py-2","focus:border-blue-500","focus:outline-none","focus:ring-2","focus:ring-blue-500/50",3,"ngModelChange","ngModel"],[1,"fas","fa-filter","text-amber-500","mr-2"],[1,"w-full","rounded-lg","border","border-gray-300","px-4","py-2","focus:border-blue-500","focus:outline-none","focus:ring-2","focus:ring-blue-500/50",3,"ngModelChange","ngModel"],["value","all"],[3,"value"],[1,"mt-6","flex","justify-center","gap-4"],[1,"btns-color","rounded-full","px-6","py-2","font-semibold","shadow-lg","transition","duration-150","hover:shadow-xl",3,"click"],[1,"fas","fa-search","mr-2"],[1,"fas","fa-redo","mr-2"],[1,"mt-4","text-center"],[1,"text-lg","font-semibold","text-color"],[1,"fas","fa-list-check","text-blue-500","mr-2"],[1,"space-y-6"],[1,"container-custom","rounded-xl","p-12","text-center","shadow-2xl"],[1,"grid","gap-10","md:grid-cols-2","lg:grid-cols-3"],[1,"fas","fa-search","text-6xl","text-gray-400","mb-4"],[1,"text-2xl","font-bold","text-color","mb-2"],[1,"text-lg","text-color"],[1,"container-custom","flex","flex-col","overflow-hidden","rounded-xl","shadow-2xl","transition","duration-300","hover:shadow-blue-500/20","hover:scale-[1.02]","cursor-pointer",3,"routerLink"],[1,"relative","h-56","bg-gradient-to-tr","from-gray-700","to-gray-900"],["loading","lazy",1,"h-full","w-full","object-cover",3,"src","alt"],[1,"text-color","absolute","left-4","top-4","rounded-full","px-3","py-1","text-xs","font-bold","uppercase","tracking-wider",3,"ngClass"],[1,"flex","flex-grow","flex-col","p-6"],[1,"text-color","mb-2","text-sm","font-semibold"],[1,"text-color","mb-3","text-2xl","font-bold"],[1,"text-color","mb-4","text-base","line-clamp-3"],[1,"text-color","mt-4","self-start","text-sm","font-medium","hover:text-blue-300"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"Buscador de Eventos"),n(),t(5,"p",4),o(6," Encuentra eventos hist\xF3ricos por nombre, fecha, categor\xEDa o contenido "),n()(),t(7,"div",5)(8,"div",6)(9,"div")(10,"label",7),c(11,"i",8),o(12," Nombre del Evento "),n(),t(13,"input",9),g("ngModelChange",function(a){return p(i.searchName,a)||(i.searchName=a),a}),n()(),t(14,"div")(15,"label",7),c(16,"i",10),o(17," Fecha "),n(),t(18,"input",11),g("ngModelChange",function(a){return p(i.searchDate,a)||(i.searchDate=a),a}),n()(),t(19,"div")(20,"label",7),c(21,"i",12),o(22," Palabras Clave "),n(),t(23,"input",13),g("ngModelChange",function(a){return p(i.searchContent,a)||(i.searchContent=a),a}),n()(),t(24,"div")(25,"label",7),c(26,"i",14),o(27," Categor\xEDa "),n(),t(28,"select",15),g("ngModelChange",function(a){return p(i.selectedCategory,a)||(i.selectedCategory=a),a}),t(29,"option",16),o(30,"Todas las Categor\xEDas"),n(),x(31,K,2,2,"option",17,M),n()()(),t(33,"div",18)(34,"button",19),C("click",function(){return i.applyFilters()}),c(35,"i",20),o(36," Buscar Resultados "),n(),t(37,"button",19),C("click",function(){return i.clearFilters()}),c(38,"i",21),o(39," Limpiar Filtros "),n()(),t(40,"div",22)(41,"p",23),c(42,"i",24),o(43),n()()(),t(44,"div",25),E(45,Q,6,0,"div",26)(46,Z,3,0,"div",27),n()()()),r&2&&(s(13),u("ngModel",i.searchName),s(5),u("ngModel",i.searchDate),s(5),u("ngModel",i.searchContent),s(5),u("ngModel",i.selectedCategory),s(3),y(i.categories),s(12),f(" ",i.filteredEvents.length," evento(s) encontrado(s) "),s(2),w(i.filteredEvents.length===0?45:46))},dependencies:[D,V,q,R,W,B,O,j,k,L],styles:[".line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{color:#1f2937!important;font-weight:500}input[type=text][_ngcontent-%COMP%]::placeholder, select[_ngcontent-%COMP%]::placeholder{color:#9ca3af;font-weight:400}"]})};export{z as Search};
