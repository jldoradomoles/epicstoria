<!-- Página de Detalle del Evento -->
<div class="min-h-screen">
  @if (event) {
    <!-- Hero Section con Imagen -->
    <div class="relative h-96 overflow-hidden">
      <img
        [src]="event.imageUrl"
        [alt]="event.title"
        class="heigth-full w-full object-cover opacity-60"
        (error)="onImageError($event)"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"></div>

      <!-- Botón de Regreso -->
      <div class="absolute left-4 top-4 sm:left-8 sm:top-8">
        <a
          routerLink="/"
          class="btns-color inline-flex items-center rounded-full bg-gray-800/80 px-4 py-2 text-sm font-medium text-white backdrop-blur-sm transition duration-150 hover:bg-gray-700"
        >
          <svg
            class="mr-2 h-4 w-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"
            ></path>
          </svg>
          Volver
        </a>
      </div>

      <!-- Título y Fecha en la Imagen -->
      <div class="absolute bottom-0 left-0 right-0 p-8">
        <div class="mx-auto max-w-5xl">
          <span
            [class]="
              'mb-4 inline-block rounded-full px-4 py-1 text-sm font-bold uppercase tracking-wider text-color ' +
              getCategoryColor(event.category)
            "
          >
            {{ event.category }}
          </span>
          <h1 class="text-color mb-2 text-5xl font-black md:text-6xl">{{ event.title }}</h1>
          <p class="text-xl font-semibold text-color">{{ event.date | dateFormat }}</p>
        </div>
      </div>
    </div>

    <!-- Contenido Principal -->
    <div class="mx-auto max-w-5xl px-4 py-12 sm:px-6 lg:px-8">
      <!-- Resumen -->
      <div class="mb-12 rounded-xl container-custom p-8 shadow-2xl">
        <h2 class="mb-4 text-2xl font-bold flex items-center gap-3 border-title pb-2">
          <i class="fas fa-file-alt text-blue-500 text-xl"></i>
          Resumen
        </h2>
        @for (paragraph of getParagraphs(event.summary); track $index) {
          <p class="mb-4 text-lg leading-relaxed">{{ paragraph }}</p>
        }
      </div>

      <!-- Contexto Histórico -->
      <div class="mb-12 rounded-xl container-custom p-8 shadow-2xl">
        <h2 class="mb-6 border-title pb-2 text-3xl font-bold flex items-center gap-3">
          <i class="fas fa-book-open text-amber-500 text-2xl"></i>
          Contexto Histórico
        </h2>
        <div class="space-y-4">
          @for (paragraph of getParagraphs(event.context); track $index) {
            @if ($index === 0) {
              <!-- Párrafo con imagen al lado izquierdo (primer párrafo) -->
              <div class="flex flex-col md:flex-row gap-6 items-start">
                <div class="md:w-1/3">
                  <img
                    [src]="event.imageUrl"
                    [alt]="event.title"
                    class="w-full h-auto rounded-lg shadow-lg object-cover imagen-dato-curioso"
                    (error)="onImageError($event)"
                  />
                </div>
                <div class="md:w-2/3">
                  <p class="text-lg leading-relaxed">{{ paragraph }}</p>
                </div>
              </div>
            } @else if ($index === 2) {
              <!-- Párrafo con imagen al lado derecho (tercer párrafo) -->
              <div class="flex flex-col md:flex-row gap-6 items-start">
                <div class="md:w-2/3">
                  <p class="text-lg leading-relaxed">{{ paragraph }}</p>
                </div>
              </div>
            } @else {
              <p class="text-lg leading-relaxed">{{ paragraph }}</p>
            }
          }
        </div>
      </div>
      <!-- Datos Curiosos -->
      <div class="mb-12 container-custom px-6 rounded-xl py-3">
        <h2 class="mb-6 text-3xl font-bold flex items-center gap-3">
          <i class="fas fa-lightbulb text-purple-500 text-2xl"></i>
          Datos Curiosos
        </h2>
        <div class="grid gap-6 md:grid-cols-2">
          @for (fact of event.keyFacts; track fact.title; let idx = $index; let isLast = $last) {
            @if (idx === 0) {
              <!-- Primer dato curioso - imagen a la izquierda -->
              <div class="rounded-xl overflow-hidden">
                <img
                  [src]="event.imageUrl"
                  [alt]="event.title"
                  class="imagen-dato-curioso"
                  (error)="onImageError($event)"
                />
              </div>
              <div
                class="rounded-xl container-custom p-6 transition duration-300 hover:border-blue-500/50 hover:shadow-xl"
              >
                <h3 class="mb-2 text-lg font-bold flex items-center gap-2">
                  <i
                    [class]="
                      getFactIcon(fact.title, fact.description).icon +
                      ' text-sm ' +
                      getFactIcon(fact.title, fact.description).color
                    "
                  ></i>
                  {{ fact.title }}
                </h3>
                <p>{{ fact.description }}</p>
              </div>
            } @else if (idx === 4) {
              <!-- Quinto dato curioso con imagen al lado derecho - fila 3 -->
              <div
                class="rounded-xl container-custom p-6 transition duration-300 hover:border-blue-500/50 hover:shadow-xl md:col-start-1 md:row-start-3"
              >
                <h3 class="mb-2 text-lg font-bold flex items-center gap-2">
                  <i
                    [class]="
                      getFactIcon(fact.title, fact.description).icon +
                      ' text-sm ' +
                      getFactIcon(fact.title, fact.description).color
                    "
                  ></i>
                  {{ fact.title }}
                </h3>
                <p>{{ fact.description }}</p>
              </div>
              <div
                class="rounded-xl overflow-hidden w-full aspect-square md:col-start-2 md:row-start-3"
              >
                <img
                  [src]="event.imageUrl"
                  [alt]="event.title"
                  class="w-full h-full object-cover"
                  (error)="onImageError($event)"
                />
              </div>
            } @else if (isLast && event.keyFacts.length % 2 !== 0) {
              <!-- Último dato si el total es impar - imagen a la izquierda -->
              <div class="rounded-xl overflow-hidden">
                <img
                  [src]="event.imageUrl"
                  [alt]="event.title"
                  class="imagen-dato-curioso"
                  (error)="onImageError($event)"
                />
              </div>
              <div
                class="rounded-xl container-custom p-6 transition duration-300 hover:border-blue-500/50 hover:shadow-xl"
              >
                <h3 class="mb-2 text-lg font-bold flex items-center gap-2">
                  <i
                    [class]="
                      getFactIcon(fact.title, fact.description).icon +
                      ' text-sm ' +
                      getFactIcon(fact.title, fact.description).color
                    "
                  ></i>
                  {{ fact.title }}
                </h3>
                <p>{{ fact.description }}</p>
              </div>
            } @else {
              <!-- Resto de datos curiosos -->
              <div
                class="rounded-xl container-custom p-6 transition duration-300 hover:border-blue-500/50 hover:shadow-xl"
              >
                <h3 class="mb-2 text-lg font-bold flex items-center gap-2">
                  <i
                    [class]="
                      getFactIcon(fact.title, fact.description).icon +
                      ' text-sm ' +
                      getFactIcon(fact.title, fact.description).color
                    "
                  ></i>
                  {{ fact.title }}
                </h3>
                <p>{{ fact.description }}</p>
              </div>
            }
          }
        </div>
      </div>

      <!-- Cronología -->
      <div class="mb-12 container-custom px-6 rounded-xl py-3">
        <h2 class="mb-6 pb-2 text-3xl font-bold flex items-center gap-3">
          <i class="fas fa-clock text-green-500 text-2xl"></i>
          Cronología
        </h2>
        <div class="space-y-6">
          @for (item of event.timeline; track item.date) {
            <div class="container-custom border-cronologia flex gap-6 px-6 py-3">
              <div class="flex-shrink-0 flex items-center gap-3">
                <i
                  [class]="
                    getTimelineIcon(item.date).icon + ' text-lg ' + getTimelineIcon(item.date).color
                  "
                ></i>
                <div class="rounded-full px-4 py-2 text-sm font-bold">
                  {{ item.date | dateFormat }}
                </div>
              </div>
              <div class="flex-grow">
                <p class="">{{ item.event }}</p>
              </div>
            </div>
          }
        </div>
      </div>

      <!-- Consecuencias -->
      <div class="mb-12 rounded-xl container-custom p-8 shadow-2xl">
        <h2 class="border-title mb-6 text-3xl font-bold flex items-center gap-3 pb-2">
          <i class="fas fa-meteor text-red-500 text-2xl"></i>
          Consecuencias y Legado
        </h2>
        <div class="space-y-4">
          @for (paragraph of getParagraphs(event.consequences); track $index) {
            <p class="text-lg leading-relaxed">{{ paragraph }}</p>
          }
        </div>
      </div>

      <!-- Quiz Interactivo -->
      <div class="mb-12">
        <h2 class="mb-6 text-3xl font-bold text-color-dark flex items-center gap-3">
          <i class="fas fa-brain text-purple-500 text-2xl"></i>
          Quiz Interactivo
        </h2>
        <app-quiz [event]="event"></app-quiz>
      </div>
    </div>

    <!-- Navegación a Otros Eventos -->
    <div class="pt-12">
      <!-- <h2 class="mb-8 text-center text-2xl font-bold text-color-dark">Otros Eventos Destacados</h2> -->
      <div class="flex justify-center gap-4">
        <a
          routerLink="/"
          fragment="eventos"
          class="btns-color rounded-full px-8 py-3 font-semibold shadow-lg transition duration-150"
        >
          Volver a los Eventos
        </a>
      </div>
    </div>
  }
</div>
