import{a as L,b as p,c as y,d as M,g as T,h as k,i as N,m as I,o as D}from"./chunk-SFHHH3KZ.js";import{b as E}from"./chunk-HWYJJFZ5.js";import{p as S,r as w,s as F}from"./chunk-XDCWJPAS.js";import{$a as d,Ab as a,Bb as C,Ha as c,Ma as _,ab as u,fb as f,gb as i,ha as v,hb as o,ib as m,rb as x,tb as b,za as l,zb as h}from"./chunk-C264W5OG.js";function P(e,r){if(e&1&&(i(0,"div",7),m(1,"i",26),i(2,"span"),a(3),o()()),e&2){let t=b();l(3),C(t.errorMessage())}}function R(e,r){e&1&&a(0," El correo es requerido ")}function q(e,r){e&1&&a(0," Ingresa un correo v\xE1lido ")}function G(e,r){if(e&1&&(i(0,"p",15),d(1,R,1,0)(2,q,1,0),o()),e&2){let t,n=b();l(),u(!((t=n.loginForm.get("email"))==null||t.errors==null)&&t.errors.required?1:!((t=n.loginForm.get("email"))==null||t.errors==null)&&t.errors.email?2:-1)}}function j(e,r){e&1&&a(0," La contrase\xF1a es requerida ")}function B(e,r){e&1&&a(0," M\xEDnimo 6 caracteres ")}function U(e,r){if(e&1&&(i(0,"p",15),d(1,j,1,0)(2,B,1,0),o()),e&2){let t,n=b();l(),u(!((t=n.loginForm.get("password"))==null||t.errors==null)&&t.errors.required?1:!((t=n.loginForm.get("password"))==null||t.errors==null)&&t.errors.minlength?2:-1)}}function V(e,r){e&1&&(m(0,"i",27),i(1,"span"),a(2,"Iniciando sesi\xF3n..."),o())}function z(e,r){e&1&&(m(0,"i",28),i(1,"span"),a(2,"Iniciar Sesi\xF3n"),o())}var A=class e{constructor(r,t,n,s){this.fb=r;this.authService=t;this.router=n;this.route=s;this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}loginForm;errorMessage=v("");showPassword=v(!1);returnUrl="/";get isLoading(){return this.authService.isLoading()}togglePassword(){this.showPassword.update(r=>!r)}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.errorMessage.set(""),this.authService.login(this.loginForm.value).subscribe({next:()=>{this.router.navigateByUrl(this.returnUrl)},error:r=>{let t=r.error?.message||"Error al iniciar sesi\xF3n. Int\xE9ntalo de nuevo.";this.errorMessage.set(t)}})}static \u0275fac=function(t){return new(t||e)(c(I),c(E),c(w),c(S))};static \u0275cmp=_({type:e,selectors:[["app-login"]],decls:41,vars:9,consts:[[1,"min-h-screen","py-12","px-4"],[1,"max-w-md","mx-auto"],[1,"text-center","mb-8"],["routerLink","/",1,"inline-block"],[1,"title-font","text-4xl","text-amber-100","hover:text-amber-200","transition-colors"],[1,"mt-2","text-amber-200/70"],[1,"container-custom","rounded-xl","p-8"],[1,"mb-6","p-4","bg-red-900/50","border","border-red-500/50","rounded-lg","text-red-200","text-sm","flex","items-center","gap-3"],[3,"ngSubmit","formGroup"],[1,"mb-6"],["for","email",1,"block","text-amber-100","text-sm","font-medium","mb-2"],[1,"relative"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-amber-400/60"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email","autocomplete","off","placeholder","tu@email.com",1,"w-full","pl-10","pr-4","py-3","bg-stone-800/50","border","border-amber-900/30","rounded-lg","text-amber-100","placeholder-amber-100/40","focus:outline-none","focus:border-amber-500/50","focus:ring-1","focus:ring-amber-500/30","transition-colors"],[1,"mt-2","text-red-400","text-sm"],["for","password",1,"block","text-amber-100","text-sm","font-medium","mb-2"],[1,"fas","fa-lock"],["id","password","formControlName","password","autocomplete","new-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","pl-10","pr-12","py-3","bg-stone-800/50","border","border-amber-900/30","rounded-lg","text-amber-100","placeholder-amber-100/40","focus:outline-none","focus:border-amber-500/50","focus:ring-1","focus:ring-amber-500/30","transition-colors",3,"type"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-amber-400/60","hover:text-amber-400","transition-colors",3,"click"],["type","submit",1,"w-full","py-3","px-4","bg-gradient-to-r","from-amber-600","to-amber-700","hover:from-amber-500","hover:to-amber-600","text-white","font-semibold","rounded-lg","transition-all","duration-300","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],[1,"mt-6","text-center"],[1,"text-amber-200/70","text-sm"],["routerLink","/register",1,"text-amber-400","hover:text-amber-300","font-medium","transition-colors"],["routerLink","/",1,"text-amber-200/60","hover:text-amber-200","text-sm","transition-colors","inline-flex","items-center","gap-2"],[1,"fas","fa-arrow-left"],[1,"fas","fa-exclamation-circle","text-red-400"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-sign-in-alt"]],template:function(t,n){if(t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"h1",4),a(5," Epicstoria "),o()(),i(6,"p",5),a(7,"Inicia sesi\xF3n para continuar"),o()(),i(8,"div",6),d(9,P,4,1,"div",7),i(10,"form",8),x("ngSubmit",function(){return n.onSubmit()}),i(11,"div",9)(12,"label",10),a(13," Correo electr\xF3nico "),o(),i(14,"div",11)(15,"span",12),m(16,"i",13),o(),m(17,"input",14),o(),d(18,G,3,1,"p",15),o(),i(19,"div",9)(20,"label",16),a(21," Contrase\xF1a "),o(),i(22,"div",11)(23,"span",12),m(24,"i",17),o(),m(25,"input",18),i(26,"button",19),x("click",function(){return n.togglePassword()}),m(27,"i"),o()(),d(28,U,3,1,"p",15),o(),i(29,"button",20),d(30,V,3,0)(31,z,3,0),o()(),i(32,"div",21)(33,"p",22),a(34," \xBFNo tienes cuenta? "),i(35,"a",23),a(36," Reg\xEDstrate aqu\xED "),o()()()(),i(37,"div",21)(38,"a",24),m(39,"i",25),a(40," Volver al inicio "),o()()()()),t&2){let s,g;l(9),u(n.errorMessage()?9:-1),l(),f("formGroup",n.loginForm),l(8),u((s=n.loginForm.get("email"))!=null&&s.touched&&((s=n.loginForm.get("email"))!=null&&s.errors)?18:-1),l(7),f("type",n.showPassword()?"text":"password"),l(2),h(n.showPassword()?"fas fa-eye-slash":"fas fa-eye"),l(),u((g=n.loginForm.get("password"))!=null&&g.touched&&((g=n.loginForm.get("password"))!=null&&g.errors)?28:-1),l(),f("disabled",n.isLoading),l(),u(n.isLoading?30:31)}},dependencies:[F,D,T,L,y,M,N,k],encapsulation:2})};export{A as LoginComponent};
